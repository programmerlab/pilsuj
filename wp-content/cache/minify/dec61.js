!function(s){"use strict";var r={init:function(){s(document.body).on("keyup change","form.register #reg_password, form.checkout #account_password, form.edit-account #password_1, form.lost_reset_password #password_1",this.strengthMeter),s("form.checkout #createaccount").change()},strengthMeter:function(){var e=s("form.register, form.checkout, form.edit-account, form.lost_reset_password"),t=s('button[type="submit"]',e),o=s("#reg_password, #account_password, #password_1",e),a=1,d=o.val();r.includeMeter(e,o),a=r.checkPasswordStrength(e,o),d.length>0&&a<wc_password_strength_meter_params.min_password_strength&&!e.is("form.checkout")?t.attr("disabled","disabled").addClass("disabled"):t.removeAttr("disabled","disabled").removeClass("disabled")},includeMeter:function(r,e){var t=r.find(".woocommerce-password-strength");""===e.val()?(t.remove(),s(document.body).trigger("wc-password-strength-removed")):0===t.length&&(e.after('<div class="woocommerce-password-strength" aria-live="polite"></div>'),s(document.body).trigger("wc-password-strength-added"))},checkPasswordStrength:function(s,r){var e=s.find(".woocommerce-password-strength"),t=s.find(".woocommerce-password-hint"),o='<small class="woocommerce-password-hint">'+wc_password_strength_meter_params.i18n_password_hint+"</small>",a=wp.passwordStrength.meter(r.val(),wp.passwordStrength.userInputBlacklist()),d="";switch(e.removeClass("short bad good strong"),t.remove(),a<wc_password_strength_meter_params.min_password_strength&&(d=" - "+wc_password_strength_meter_params.i18n_password_error),a){case 0:e.addClass("short").html(pwsL10n["short"]+d),e.after(o);break;case 1:case 2:e.addClass("bad").html(pwsL10n.bad+d),e.after(o);break;case 3:e.addClass("good").html(pwsL10n.good+d);break;case 4:e.addClass("strong").html(pwsL10n.strong+d);break;case 5:e.addClass("short").html(pwsL10n.mismatch)}return a}};r.init()}(jQuery);
;!function(a){function b(){return a("<div/>")}var c=Math.abs,d=Math.max,e=Math.min,f=Math.round;a.imgAreaSelect=function(g,h){function i(a){return a+ra.left-sa.left}function j(a){return a+ra.top-sa.top}function k(a){return a-ra.left+sa.left}function l(a){return a-ra.top+sa.top}function m(a){return d(a.pageX||0,o(a).x)-sa.left}function n(a){return d(a.pageY||0,o(a).y)-sa.top}function o(a){var b=a.originalEvent||{};return b.touches&&b.touches.length?{x:b.touches[0].pageX,y:b.touches[0].pageY}:{x:0,y:0}}function p(a){var b=a||T,c=a||U;return{x1:f(va.x1*b),y1:f(va.y1*c),x2:f(va.x2*b),y2:f(va.y2*c),width:f(va.x2*b)-f(va.x1*b),height:f(va.y2*c)-f(va.y1*c)}}function q(a,b,c,d,e){var g=e||T,h=e||U;va={x1:f(a/g||0),y1:f(b/h||0),x2:f(c/g||0),y2:f(d/h||0)},va.width=va.x2-va.x1,va.height=va.y2-va.y1}function r(){K&&la.width()&&(ra={left:f(la.offset().left),top:f(la.offset().top)},O=la.innerWidth(),P=la.innerHeight(),ra.top+=la.outerHeight()-P>>1,ra.left+=la.outerWidth()-O>>1,W=f(h.minWidth/T)||0,X=f(h.minHeight/U)||0,Y=f(e(h.maxWidth/T||1<<24,O)),Z=f(e(h.maxHeight/U||1<<24,P)),"1.3.2"!=a().jquery||"fixed"!=ua||wa.getBoundingClientRect||(ra.top+=d(document.body.scrollTop,wa.scrollTop),ra.left+=d(document.body.scrollLeft,wa.scrollLeft)),sa=/absolute|relative/.test(Q.css("position"))?{left:f(Q.offset().left)-Q.scrollLeft(),top:f(Q.offset().top)-Q.scrollTop()}:"fixed"==ua?{left:a(document).scrollLeft(),top:a(document).scrollTop()}:{left:0,top:0},M=i(0),N=j(0),(va.x2>O||va.y2>P)&&z())}function s(b){if(_){switch(ma.css({left:i(va.x1),top:j(va.y1)}).add(na).width(ia=va.width).height(ja=va.height),na.add(oa).add(qa).css({left:0,top:0}),oa.width(d(ia-oa.outerWidth()+oa.innerWidth(),0)).height(d(ja-oa.outerHeight()+oa.innerHeight(),0)),a(pa[0]).css({left:M,top:N,width:va.x1,height:P}),a(pa[1]).css({left:M+va.x1,top:N,width:ia,height:va.y1}),a(pa[2]).css({left:M+va.x2,top:N,width:O-va.x2,height:P}),a(pa[3]).css({left:M+va.x1,top:N+va.y2,width:ia,height:P-va.y2}),ia-=qa.outerWidth(),ja-=qa.outerHeight(),qa.length){case 8:a(qa[4]).css({left:ia>>1}),a(qa[5]).css({left:ia,top:ja>>1}),a(qa[6]).css({left:ia>>1,top:ja}),a(qa[7]).css({top:ja>>1});case 4:qa.slice(1,3).css({left:ia}),qa.slice(2,4).css({top:ja})}b!==!1&&(a.imgAreaSelect.onKeyPress!=ya&&a(document).unbind(a.imgAreaSelect.keyPress,a.imgAreaSelect.onKeyPress),h.keys&&a(document)[a.imgAreaSelect.keyPress](a.imgAreaSelect.onKeyPress=ya)),za&&oa.outerWidth()-oa.innerWidth()==2&&(oa.css("margin",0),setTimeout(function(){oa.css("margin","auto")},0))}}function t(a){r(),s(a),aa=i(va.x1),ba=j(va.y1),ca=i(va.x2),da=j(va.y2)}function u(a,b){h.fadeSpeed?a.fadeOut(h.fadeSpeed,b):a.hide()}function v(a){var b=k(m(a))-va.x1,c=l(n(a))-va.y1;ka||(r(),ka=!0,ma.one("mouseout",function(){ka=!1})),V="",h.resizable&&(c<=h.resizeMargin?V="n":c>=va.height-h.resizeMargin&&(V="s"),b<=h.resizeMargin?V+="w":b>=va.width-h.resizeMargin&&(V+="e")),ma.css("cursor",V?V+"-resize":h.movable?"move":""),L&&L.toggle()}function w(b){a("body").css("cursor",""),(h.autoHide||va.width*va.height==0)&&u(ma.add(pa),function(){a(this).hide()}),a(document).off("mousemove touchmove",A),ma.on("mousemove touchmove",v),h.onSelectEnd(g,p())}function x(b){return("mousedown"!=b.type||1==b.which)&&(v(b),r(),V?(a("body").css("cursor",V+"-resize"),aa=i(va[/w/.test(V)?"x2":"x1"]),ba=j(va[/n/.test(V)?"y2":"y1"]),a(document).on("mousemove touchmove",A).one("mouseup touchend",w),ma.off("mousemove touchmove",v)):h.movable?(R=M+va.x1-m(b),S=N+va.y1-n(b),ma.off("mousemove touchmove",v),a(document).on("mousemove touchmove",C).one("mouseup touchend",function(){h.onSelectEnd(g,p()),a(document).off("mousemove touchmove",C),ma.on("mousemove touchmove",v)})):la.mousedown(b),!1)}function y(a){$&&(a?(ca=d(M,e(M+O,aa+c(da-ba)*$*(ca>aa||-1))),da=f(d(N,e(N+P,ba+c(ca-aa)/$*(da>ba||-1)))),ca=f(ca)):(da=d(N,e(N+P,ba+c(ca-aa)/$*(da>ba||-1))),ca=f(d(M,e(M+O,aa+c(da-ba)*$*(ca>aa||-1)))),da=f(da)))}function z(){aa=e(aa,M+O),ba=e(ba,N+P),c(ca-aa)<W&&(ca=aa-W*(ca<aa||-1),ca<M?aa=M+W:ca>M+O&&(aa=M+O-W)),c(da-ba)<X&&(da=ba-X*(da<ba||-1),da<N?ba=N+X:da>N+P&&(ba=N+P-X)),ca=d(M,e(ca,M+O)),da=d(N,e(da,N+P)),y(c(ca-aa)<c(da-ba)*$),c(ca-aa)>Y&&(ca=aa-Y*(ca<aa||-1),y()),c(da-ba)>Z&&(da=ba-Z*(da<ba||-1),y(!0)),va={x1:k(e(aa,ca)),x2:k(d(aa,ca)),y1:l(e(ba,da)),y2:l(d(ba,da)),width:c(ca-aa),height:c(da-ba)},s(),h.onSelectChange(g,p())}function A(a){return ca=/w|e|^$/.test(V)||$?m(a):i(va.x2),da=/n|s|^$/.test(V)||$?n(a):j(va.y2),z(),!1}function B(b,c){ca=(aa=b)+va.width,da=(ba=c)+va.height,a.extend(va,{x1:k(aa),y1:l(ba),x2:k(ca),y2:l(da)}),s(),h.onSelectChange(g,p())}function C(a){return aa=d(M,e(R+m(a),M+O-va.width)),ba=d(N,e(S+n(a),N+P-va.height)),B(aa,ba),a.preventDefault(),!1}function D(){a(document).off("mousemove touchmove",D),r(),ca=aa,da=ba,z(),V="",pa.is(":visible")||ma.add(pa).hide().fadeIn(h.fadeSpeed||0),_=!0,a(document).off("mouseup touchend",E).on("mousemove touchmove",A).one("mouseup touchend",w),ma.off("mousemove touchmove",v),h.onSelectStart(g,p())}function E(){a(document).off("mousemove touchmove",D).off("mouseup touchend",E),u(ma.add(pa)),q(k(aa),l(ba),k(aa),l(ba)),this instanceof a.imgAreaSelect||(h.onSelectChange(g,p()),h.onSelectEnd(g,p()))}function F(b){return!(b.which>1||pa.is(":animated"))&&(r(),R=aa=m(b),S=ba=n(b),a(document).on({"mousemove touchmove":D,"mouseup touchend":E}),!1)}function G(){t(!1)}function H(){K=!0,J(h=a.extend({classPrefix:"imgareaselect",movable:!0,parent:"body",resizable:!0,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},h)),ma.add(pa).css({visibility:""}),h.show&&(_=!0,r(),s(),ma.add(pa).hide().fadeIn(h.fadeSpeed||0)),setTimeout(function(){h.onInit(g,p())},0)}function I(a,b){for(var c in b)void 0!==h[c]&&a.css(b[c],h[c])}function J(c){if(c.parent&&(Q=a(c.parent)).append(ma.add(pa)),a.extend(h,c),r(),null!=c.handles){for(qa.remove(),qa=a([]),ga=c.handles?"corners"==c.handles?4:8:0;ga--;)qa=qa.add(b());qa.addClass(h.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:ta+1||1}),!parseInt(qa.css("width"))>=0&&qa.width(5).height(5),(ha=h.borderWidth)&&qa.css({borderWidth:ha,borderStyle:"solid"}),I(qa,{borderColor1:"border-color",borderColor2:"background-color",borderOpacity:"opacity"})}for(T=h.imageWidth/O||1,U=h.imageHeight/P||1,null!=c.x1&&(q(c.x1,c.y1,c.x2,c.y2),c.show=!c.hide),c.keys&&(h.keys=a.extend({shift:1,ctrl:"resize"},c.keys)),pa.addClass(h.classPrefix+"-outer"),na.addClass(h.classPrefix+"-selection"),ga=0;ga++<4;)a(oa[ga-1]).addClass(h.classPrefix+"-border"+ga);I(na,{selectionColor:"background-color",selectionOpacity:"opacity"}),I(oa,{borderOpacity:"opacity",borderWidth:"border-width"}),I(pa,{outerColor:"background-color",outerOpacity:"opacity"}),(ha=h.borderColor1)&&a(oa[0]).css({borderStyle:"solid",borderColor:ha}),(ha=h.borderColor2)&&a(oa[1]).css({borderStyle:"dashed",borderColor:ha}),ma.append(na.add(oa).add(L)).append(qa),za&&((ha=(pa.css("filter")||"").match(/opacity=(\d+)/))&&pa.css("opacity",ha[1]/100),(ha=(oa.css("filter")||"").match(/opacity=(\d+)/))&&oa.css("opacity",ha[1]/100)),c.hide?u(ma.add(pa)):c.show&&K&&(_=!0,ma.add(pa).fadeIn(h.fadeSpeed||0),t()),$=(fa=(h.aspectRatio||"").split(/:/))[0]/fa[1],la.add(pa).unbind("mousedown",F),h.disable||h.enable===!1?(ma.off({"mousemove touchmove":v,"mousedown touchstart":x}),a(window).off("resize",G)):((h.enable||h.disable===!1)&&((h.resizable||h.movable)&&ma.on({"mousemove touchmove":v,"mousedown touchstart":x}),a(window).resize(G)),h.persistent||la.add(pa).on("mousedown touchstart",F)),h.enable=h.disable=void 0}var K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la=a(g),ma=b(),na=b(),oa=b().add(b()).add(b()).add(b()),pa=b().add(b()).add(b()).add(b()),qa=a([]),ra={left:0,top:0},sa={left:0,top:0},ta=0,ua="absolute",va={x1:0,y1:0,x2:0,y2:0,width:0,height:0},wa=document.documentElement,xa=navigator.userAgent,ya=function(a){var b,c,f=h.keys,g=a.keyCode;if(b=isNaN(f.alt)||!a.altKey&&!a.originalEvent.altKey?!isNaN(f.ctrl)&&a.ctrlKey?f.ctrl:!isNaN(f.shift)&&a.shiftKey?f.shift:isNaN(f.arrows)?10:f.arrows:f.alt,"resize"==f.arrows||"resize"==f.shift&&a.shiftKey||"resize"==f.ctrl&&a.ctrlKey||"resize"==f.alt&&(a.altKey||a.originalEvent.altKey)){switch(g){case 37:b=-b;case 39:c=d(aa,ca),aa=e(aa,ca),ca=d(c+b,aa),y();break;case 38:b=-b;case 40:c=d(ba,da),ba=e(ba,da),da=d(c+b,ba),y(!0);break;default:return}z()}else switch(aa=e(aa,ca),ba=e(ba,da),g){case 37:B(d(aa-b,M),ba);break;case 38:B(aa,d(ba-b,N));break;case 39:B(aa+e(b,O-k(ca)),ba);break;case 40:B(aa,ba+e(b,P-l(da)));break;default:return}return!1};this.remove=function(){J({disable:!0}),ma.add(pa).remove()},this.getOptions=function(){return h},this.setOptions=J,this.getSelection=p,this.setSelection=q,this.cancelSelection=E,this.update=t;var za=(/msie ([\w.]+)/i.exec(xa)||[])[1],Aa=/opera/i.test(xa),Ba=/webkit/i.test(xa)&&!/chrome/i.test(xa);for(ea=la;ea.length;)ta=d(ta,isNaN(ea.css("z-index"))?ta:ea.css("z-index")),"fixed"==ea.css("position")&&(ua="fixed"),ea=ea.parent(":not(body)");ta=h.zIndex||ta,za&&la.attr("unselectable","on"),a.imgAreaSelect.keyPress=za||Ba?"keydown":"keypress",Aa&&(L=b().css({width:"100%",height:"100%",position:"absolute",zIndex:ta+2||2})),ma.add(pa).css({visibility:"hidden",position:ua,overflow:"hidden",zIndex:ta||"0"}),ma.css({zIndex:ta+2||2}),na.add(oa).css({position:"absolute",fontSize:0}),g.complete||"complete"==g.readyState||!la.is("img")?H():la.one("load",H),!K&&za&&za>=7&&(g.src=g.src)},a.fn.imgAreaSelect=function(b){return b=b||{},this.each(function(){a(this).data("imgAreaSelect")?b.remove?(a(this).data("imgAreaSelect").remove(),a(this).removeData("imgAreaSelect")):a(this).data("imgAreaSelect").setOptions(b):b.remove||(void 0===b.enable&&void 0===b.disable&&(b.enable=!0),a(this).data("imgAreaSelect",new a.imgAreaSelect(this,b)))}),b.instance?a(this).data("imgAreaSelect"):this}}(jQuery);
;window.wp=window.wp||{},function(a,b){var c,d,e={},f=Array.prototype.slice;c=function(){},d=function(a,d,e){var f;return f=d&&d.hasOwnProperty("constructor")?d.constructor:function(){var b=a.apply(this,arguments);return b},b.extend(f,a),c.prototype=a.prototype,f.prototype=new c,d&&b.extend(f.prototype,d),e&&b.extend(f,e),f.prototype.constructor=f,f.__super__=a.prototype,f},e.Class=function(a,c,d){var f,g=arguments;return a&&c&&e.Class.applicator===a&&(g=c,b.extend(this,d||{})),f=this,this.instance&&(f=function(){return f.instance.apply(f,arguments)},b.extend(f,this)),f.initialize.apply(f,g),f},e.Class.extend=function(a,b){var c=d(this,a,b);return c.extend=this.extend,c},e.Class.applicator={},e.Class.prototype.initialize=function(){},e.Class.prototype.extended=function(a){for(var b=this;"undefined"!=typeof b.constructor;){if(b.constructor===a)return!0;if("undefined"==typeof b.constructor.__super__)return!1;b=b.constructor.__super__}return!1},e.Events={trigger:function(a){return this.topics&&this.topics[a]&&this.topics[a].fireWith(this,f.call(arguments,1)),this},bind:function(a){return this.topics=this.topics||{},this.topics[a]=this.topics[a]||b.Callbacks(),this.topics[a].add.apply(this.topics[a],f.call(arguments,1)),this},unbind:function(a){return this.topics&&this.topics[a]&&this.topics[a].remove.apply(this.topics[a],f.call(arguments,1)),this}},e.Value=e.Class.extend({initialize:function(a,c){this._value=a,this.callbacks=b.Callbacks(),this._dirty=!1,b.extend(this,c||{}),this.set=b.proxy(this.set,this)},instance:function(){return arguments.length?this.set.apply(this,arguments):this.get()},get:function(){return this._value},set:function(a){var b=this._value;return a=this._setter.apply(this,arguments),a=this.validate(a),null===a||_.isEqual(b,a)?this:(this._value=a,this._dirty=!0,this.callbacks.fireWith(this,[a,b]),this)},_setter:function(a){return a},setter:function(a){var b=this.get();return this._setter=a,this._value=null,this.set(b),this},resetSetter:function(){return this._setter=this.constructor.prototype._setter,this.set(this.get()),this},validate:function(a){return a},bind:function(){return this.callbacks.add.apply(this.callbacks,arguments),this},unbind:function(){return this.callbacks.remove.apply(this.callbacks,arguments),this},link:function(){var a=this.set;return b.each(arguments,function(){this.bind(a)}),this},unlink:function(){var a=this.set;return b.each(arguments,function(){this.unbind(a)}),this},sync:function(){var a=this;return b.each(arguments,function(){a.link(this),this.link(a)}),this},unsync:function(){var a=this;return b.each(arguments,function(){a.unlink(this),this.unlink(a)}),this}}),e.Values=e.Class.extend({defaultConstructor:e.Value,initialize:function(a){b.extend(this,a||{}),this._value={},this._deferreds={}},instance:function(a){return 1===arguments.length?this.value(a):this.when.apply(this,arguments)},value:function(a){return this._value[a]},has:function(a){return"undefined"!=typeof this._value[a]},add:function(a,b){var c,d,f=this;if("string"==typeof a)c=a,d=b;else{if("string"!=typeof a.id)throw new Error("Unknown key");c=a.id,d=a}return f.has(c)?f.value(c):(f._value[c]=d,d.parent=f,d.extended(e.Value)&&d.bind(f._change),f.trigger("add",d),f._deferreds[c]&&f._deferreds[c].resolve(),f._value[c])},create:function(a){return this.add(a,new this.defaultConstructor(e.Class.applicator,f.call(arguments,1)))},each:function(a,c){c="undefined"==typeof c?this:c,b.each(this._value,function(b,d){a.call(c,d,b)})},remove:function(a){var b=this.value(a);b&&(this.trigger("remove",b),b.extended(e.Value)&&b.unbind(this._change),delete b.parent),delete this._value[a],delete this._deferreds[a],b&&this.trigger("removed",b)},when:function(){var a=this,c=f.call(arguments),d=b.Deferred();return b.isFunction(c[c.length-1])&&d.done(c.pop()),b.when.apply(b,b.map(c,function(c){if(!a.has(c))return a._deferreds[c]=a._deferreds[c]||b.Deferred()})).done(function(){var e=b.map(c,function(b){return a(b)});return e.length!==c.length?void a.when.apply(a,c).done(function(){d.resolveWith(a,e)}):void d.resolveWith(a,e)}),d.promise()},_change:function(){this.parent.trigger("change",this)}}),b.extend(e.Values.prototype,e.Events),e.ensure=function(a){return"string"==typeof a?b(a):a},e.Element=e.Value.extend({initialize:function(a,c){var d,f,g,h=this,i=e.Element.synchronizer.html;this.element=e.ensure(a),this.events="",this.element.is("input, select, textarea")&&(d=this.element.prop("type"),this.events+=" change input",i=e.Element.synchronizer.val,this.element.is("input")&&e.Element.synchronizer[d]&&(i=e.Element.synchronizer[d])),e.Value.prototype.initialize.call(this,null,b.extend(c||{},i)),this._value=this.get(),f=this.update,g=this.refresh,this.update=function(a){a!==g.call(h)&&f.apply(this,arguments)},this.refresh=function(){h.set(g.call(h))},this.bind(this.update),this.element.bind(this.events,this.refresh)},find:function(a){return b(a,this.element)},refresh:function(){},update:function(){}}),e.Element.synchronizer={},b.each(["html","val"],function(a,b){e.Element.synchronizer[b]={update:function(a){this.element[b](a)},refresh:function(){return this.element[b]()}}}),e.Element.synchronizer.checkbox={update:function(a){this.element.prop("checked",a)},refresh:function(){return this.element.prop("checked")}},e.Element.synchronizer.radio={update:function(a){this.element.filter(function(){return this.value===a}).prop("checked",!0)},refresh:function(){return this.element.filter(":checked").val()}},b.support.postMessage=!!window.postMessage,e.Messenger=e.Class.extend({add:function(a,b,c){return this[a]=new e.Value(b,c)},initialize:function(a,c){var d=window.parent===window?null:window.parent;b.extend(this,c||{}),this.add("channel",a.channel),this.add("url",a.url||""),this.add("origin",this.url()).link(this.url).setter(function(a){var b=document.createElement("a");return b.href=a,b.protocol+"//"+b.host.replace(/:(80|443)$/,"")}),this.add("targetWindow",null),this.targetWindow.set=function(a){var b=this._value;return a=this._setter.apply(this,arguments),a=this.validate(a),null===a||b===a?this:(this._value=a,this._dirty=!0,this.callbacks.fireWith(this,[a,b]),this)},this.targetWindow(a.targetWindow||d),this.receive=b.proxy(this.receive,this),this.receive.guid=b.guid++,b(window).on("message",this.receive)},destroy:function(){b(window).off("message",this.receive)},receive:function(a){var b;a=a.originalEvent,this.targetWindow&&this.targetWindow()&&(this.origin()&&a.origin!==this.origin()||"string"==typeof a.data&&"{"===a.data[0]&&(b=JSON.parse(a.data),b&&b.id&&"undefined"!=typeof b.data&&((b.channel||this.channel())&&this.channel()!==b.channel||this.trigger(b.id,b.data))))},send:function(a,b){var c;b="undefined"==typeof b?null:b,this.url()&&this.targetWindow()&&(c={id:a,data:b},this.channel()&&(c.channel=this.channel()),this.targetWindow().postMessage(JSON.stringify(c),this.origin()))}}),b.extend(e.Messenger.prototype,e.Events),e.Notification=e.Class.extend({template:null,templateId:"customize-notification",containerClasses:"",initialize:function(a,b){var c;this.code=a,c=_.extend({message:null,type:"error",fromServer:!1,data:null,setting:null,template:null,dismissible:!1,containerClasses:""},b),delete c.code,_.extend(this,c)},render:function(){var a,c,d=this;return d.template||(d.template=wp.template(d.templateId)),c=_.extend({},d,{alt:d.parent&&d.parent.alt}),a=b(d.template(c)),d.dismissible&&a.find(".notice-dismiss").on("click keydown",function(b){"keydown"===b.type&&13!==b.which||(d.parent?d.parent.remove(d.code):a.remove())}),a}}),e=b.extend(new e.Values,e),e.get=function(){var a={};return this.each(function(b,c){a[c]=b.get()}),a},e.utils={},e.utils.parseQueryString=function(a){var b={};return _.each(a.split("&"),function(a){var c,d,e;c=a.split("=",2),c[0]&&(d=decodeURIComponent(c[0].replace(/\+/g," ")),d=d.replace(/ /g,"_"),e=_.isUndefined(c[1])?null:decodeURIComponent(c[1].replace(/\+/g," ")),b[d]=e)}),b},a.customize=e}(wp,jQuery);
;(function($,wp){var api=wp.customize;api.HeaderTool={};api.HeaderTool.ImageModel=Backbone.Model.extend({defaults:function(){return{header:{attachment_id:0,url:'',timestamp:_.now(),thumbnail_url:''},choice:'',selected:false,random:false};},initialize:function(){this.on('hide',this.hide,this);},hide:function(){this.set('choice','');api('header_image').set('remove-header');api('header_image_data').set('remove-header');},destroy:function(){var data=this.get('header'),curr=api.HeaderTool.currentHeader.get('header').attachment_id;if(curr&&data.attachment_id===curr){api.HeaderTool.currentHeader.trigger('hide');}
wp.ajax.post('custom-header-remove',{nonce:_wpCustomizeHeader.nonces.remove,wp_customize:'on',theme:api.settings.theme.stylesheet,attachment_id:data.attachment_id});this.trigger('destroy',this,this.collection);},save:function(){if(this.get('random')){api('header_image').set(this.get('header').random);api('header_image_data').set(this.get('header').random);}else{if(this.get('header').defaultName){api('header_image').set(this.get('header').url);api('header_image_data').set(this.get('header').defaultName);}else{api('header_image').set(this.get('header').url);api('header_image_data').set(this.get('header'));}}
api.HeaderTool.combinedList.trigger('control:setImage',this);},importImage:function(){var data=this.get('header');if(data.attachment_id===undefined){return;}
wp.ajax.post('custom-header-add',{nonce:_wpCustomizeHeader.nonces.add,wp_customize:'on',theme:api.settings.theme.stylesheet,attachment_id:data.attachment_id});},shouldBeCropped:function(){if(this.get('themeFlexWidth')===true&&this.get('themeFlexHeight')===true){return false;}
if(this.get('themeFlexWidth')===true&&this.get('themeHeight')===this.get('imageHeight')){return false;}
if(this.get('themeFlexHeight')===true&&this.get('themeWidth')===this.get('imageWidth')){return false;}
if(this.get('themeWidth')===this.get('imageWidth')&&this.get('themeHeight')===this.get('imageHeight')){return false;}
if(this.get('imageWidth')<=this.get('themeWidth')){return false;}
return true;}});api.HeaderTool.ChoiceList=Backbone.Collection.extend({model:api.HeaderTool.ImageModel,comparator:function(model){return-model.get('header').timestamp;},initialize:function(){var current=api.HeaderTool.currentHeader.get('choice').replace(/^https?:\/\//,''),isRandom=this.isRandomChoice(api.get().header_image);if(!this.type){this.type='uploaded';}
if(typeof this.data==='undefined'){this.data=_wpCustomizeHeader.uploads;}
if(isRandom){current=api.get().header_image;}
this.on('control:setImage',this.setImage,this);this.on('control:removeImage',this.removeImage,this);this.on('add',this.maybeRemoveOldCrop,this);this.on('add',this.maybeAddRandomChoice,this);_.each(this.data,function(elt,index){if(!elt.attachment_id){elt.defaultName=index;}
if(typeof elt.timestamp==='undefined'){elt.timestamp=0;}
this.add({header:elt,choice:elt.url.split('/').pop(),selected:current===elt.url.replace(/^https?:\/\//,'')},{silent:true});},this);if(this.size()>0){this.addRandomChoice(current);}},maybeRemoveOldCrop:function(model){var newID=model.get('header').attachment_id||false,oldCrop;if(!newID){return;}
oldCrop=this.find(function(item){return(item.cid!==model.cid&&item.get('header').attachment_id===newID);});if(oldCrop){this.remove(oldCrop);}},maybeAddRandomChoice:function(){if(this.size()===1){this.addRandomChoice();}},addRandomChoice:function(initialChoice){var isRandomSameType=RegExp(this.type).test(initialChoice),randomChoice='random-'+this.type+'-image';this.add({header:{timestamp:0,random:randomChoice,width:245,height:41},choice:randomChoice,random:true,selected:isRandomSameType});},isRandomChoice:function(choice){return(/^random-(uploaded|default)-image$/).test(choice);},shouldHideTitle:function(){return this.size()<2;},setImage:function(model){this.each(function(m){m.set('selected',false);});if(model){model.set('selected',true);}},removeImage:function(){this.each(function(m){m.set('selected',false);});}});api.HeaderTool.DefaultsList=api.HeaderTool.ChoiceList.extend({initialize:function(){this.type='default';this.data=_wpCustomizeHeader.defaults;api.HeaderTool.ChoiceList.prototype.initialize.apply(this);}});})(jQuery,window.wp);;jQuery(function($){$('.tips').tooltip();$('ul.order-status').on('click','a.dokan-edit-status',function(e){$(this).addClass('dokan-hide').closest('li').next('li').removeClass('dokan-hide');return false;});$('ul.order-status').on('click','a.dokan-cancel-status',function(e){$(this).closest('li').addClass('dokan-hide').prev('li').find('a.dokan-edit-status').removeClass('dokan-hide');return false;});$('form#dokan-order-status-form').on('submit',function(e){e.preventDefault();var self=$(this),li=self.closest('li');li.block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:0.6}});$.post(dokan.ajaxurl,self.serialize(),function(response){li.unblock();if(response.success){var prev_li=li.prev();li.addClass('dokan-hide');prev_li.find('label').replaceWith(response.data);prev_li.find('a.dokan-edit-status').removeClass('dokan-hide');}else{alert(response.data);}});});$('form#add-order-note').on('submit',function(e){e.preventDefault();if(!$('textarea#add-note-content').val())return;$('#dokan-order-notes').block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:0.6}});$.post(dokan.ajaxurl,$(this).serialize(),function(response){$('ul.order_notes').prepend(response);$('#dokan-order-notes').unblock();$('#add-note-content').val('');});return false;})
$('#dokan-order-notes').on('click','a.delete_note',function(){var note=$(this).closest('li.note');$('#dokan-order-notes').block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:0.6}});var data={action:'dokan_delete_order_note',note_id:$(note).attr('rel'),security:$('#delete-note-security').val()};$.post(dokan.ajaxurl,data,function(response){$(note).remove();$('#dokan-order-notes').unblock();});return false;});$('.order_download_permissions').on('click','button.grant_access',function(){var self=$(this),product=$('select.grant_access_id').val();if(!product)return;$('.order_download_permissions').block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:0.6}});var data={action:'dokan_grant_access_to_download',product_ids:product,loop:$('.order_download_permissions .panel').size(),order_id:self.data('order-id'),security:self.data('nonce')};$.post(dokan.ajaxurl,data,function(response){if(response){$('#accordion').append(response);}else{alert('Could not grant access - the user may already have permission for this file or billing email is not set. Ensure the billing email is set, and the order has been saved.');}
$('.datepicker').datepicker();$('.order_download_permissions').unblock();});return false;});$('.order_download_permissions').on('click','button.revoke_access',function(e){e.preventDefault();var answer=confirm('Are you sure you want to revoke access to this download?');if(answer){var self=$(this),el=self.closest('.dokan-panel');var product=self.attr('rel').split(",")[0];var file=self.attr('rel').split(",")[1];if(product>0){$(el).block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:0.6}});var data={action:'dokan_revoke_access_to_download',product_id:product,download_id:file,order_id:self.data('order-id'),security:self.data('nonce')};$.post(dokan.ajaxurl,data,function(response){$(el).fadeOut('300',function(){$(el).remove();});});}else{$(el).fadeOut('300',function(){$(el).remove();});}}
return false;});});;(function($){var dokan_seller_meta_boxes_order_items={init:function(){$("#shipped-date").datepicker({dateFormat:"yy-mm-dd"});$('body').on('click','#dokan-add-tracking-number',this.showTrackingForm);$('body').on('click','#dokan-cancel-tracking-note',this.cancelTrackingForm);$('body').on('click','#add-tracking-details',this.insertShippingTrackingInfo);$('#woocommerce-order-items').on('click','button.refund-items',this.refund_items).on('click','.cancel-action',this.cancel).on('click','button.do-api-refund, button.do-manual-refund',this.refunds.do_refund).on('change','.refund input.refund_line_total, .refund input.refund_line_tax',this.refunds.input_changed).on('change keyup','.wc-order-refund-items #refund_amount',this.refunds.amount_changed).on('change','input.refund_order_item_qty',this.refunds.refund_quantity_changed).on('keyup','.woocommerce_order_items .split-input input:eq(0)',function(){var $subtotal=$(this).next();if($subtotal.val()===''||$subtotal.is('.match-total')){$subtotal.val($(this).val()).addClass('match-total');}}).on('keyup','.woocommerce_order_items .split-input input:eq(1)',function(){$(this).removeClass('match-total');})},showTrackingForm:function(e){e.preventDefault();var self=$(this);self.closest('div').find('form#add-shipping-tracking-form').slideDown(300,function(){$(this).removeClass('dokan-hide');});},cancelTrackingForm:function(e){e.preventDefault();var self=$(this);self.closest('form#add-shipping-tracking-form').slideUp(300,function(){$(this).addClass('dokan-hide');});},insertShippingTrackingInfo:function(e){e.preventDefault();var shipping_tracking_info={shipping_provider:$('#shipping_provider').val(),shipping_number:$('#tracking_number').val(),shipped_date:$('#shipped-date').val(),action:$('#action').val(),post_id:$('#post-id').val(),security:$('#security').val()};$('#dokan-order-notes').block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:0.6}});$.post(dokan.ajaxurl,shipping_tracking_info,function(response){$('ul.order_notes').prepend(response);$('#dokan-order-notes').unblock();$('form#add-shipping-tracking-form').find("input[type=text], textarea").val("");});return false;},block:function(){$('#woocommerce-order-items').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});},unblock:function(){$('#woocommerce-order-items').unblock();},reload_items:function(){var data={order_id:dokan_refund.post_id,action:'dokan_load_order_items',security:dokan_refund.order_item_nonce};dokan_seller_meta_boxes_order_items.block();$.ajax({url:dokan_refund.ajax_url,data:data,type:'POST',success:function(response){$('.dokan-panel-default #woocommerce-order-items').empty();$('.dokan-panel-default #woocommerce-order-items').append(response);}});},refund_items:function(){$('div.wc-order-refund-items').slideDown();$('div.wc-order-bulk-actions').slideUp();$('div.wc-order-totals-items').slideUp();$('#woocommerce-order-items div.refund').show();$('.wc-order-edit-line-item .wc-order-edit-line-item-actions').hide();return false;},cancel:function(){$(this).closest('div.wc-order-data-row').slideUp();$('div.wc-order-bulk-actions').slideDown();$('div.wc-order-totals-items').slideDown();$('#woocommerce-order-items div.refund').hide();$('.wc-order-edit-line-item .wc-order-edit-line-item-actions').show();if('true'===$(this).attr('data-reload')){dokan_seller_meta_boxes_order_items.reload_items();}
return false;},refunds:{do_refund:function(){dokan_seller_meta_boxes_order_items.block();if(window.confirm(dokan_refund.i18n_do_refund)){var refund_amount=$('input#refund_amount').val();var refund_reason=$('input#refund_reason').val();var line_item_qtys={};var line_item_totals={};var line_item_tax_totals={};$('.refund input.refund_order_item_qty').each(function(index,item){if($(item).closest('tr').data('order_item_id')){if(item.value){line_item_qtys[$(item).closest('tr').data('order_item_id')]=item.value;}}});$('.refund input.refund_line_total').each(function(index,item){if($(item).closest('tr').data('order_item_id')){line_item_totals[$(item).closest('tr').data('order_item_id')]=accounting.unformat(item.value,dokan_refund.mon_decimal_point);}});$('.refund input.refund_line_tax').each(function(index,item){if($(item).closest('tr').data('order_item_id')){var tax_id=$(item).data('tax_id');if(!line_item_tax_totals[$(item).closest('tr').data('order_item_id')]){line_item_tax_totals[$(item).closest('tr').data('order_item_id')]={};}
line_item_tax_totals[$(item).closest('tr').data('order_item_id')][tax_id]=accounting.unformat(item.value,dokan_refund.mon_decimal_point);}});var data={action:'dokan_refund_request',order_id:dokan_refund.post_id,refund_amount:refund_amount,refund_reason:refund_reason,line_item_qtys:JSON.stringify(line_item_qtys,null,''),line_item_totals:JSON.stringify(line_item_totals,null,''),line_item_tax_totals:JSON.stringify(line_item_tax_totals,null,''),api_refund:$(this).is('.do-api-refund'),restock_refunded_items:$('#restock_refunded_items:checked').size()?'true':'false',security:dokan_refund.order_item_nonce};$.post(dokan_refund.ajax_url,data,function(response){if(true===response.success){window.alert(response.data);dokan_seller_meta_boxes_order_items.reload_items();}else{window.alert(response.data);dokan_seller_meta_boxes_order_items.unblock();}});}else{dokan_seller_meta_boxes_order_items.unblock();}},input_changed:function(){var refund_amount=0;var $items=$('.woocommerce_order_items').find('tr.item, tr.fee, tr.shipping');$items.each(function(){var $row=$(this);var refund_cost_fields=$row.find('.refund input:not(.refund_order_item_qty)');refund_cost_fields.each(function(index,el){refund_amount+=parseFloat(accounting.unformat($(el).val()||0,dokan_refund.mon_decimal_point));});});$('#refund_amount').val(accounting.formatNumber(refund_amount,dokan_refund.currency_format_num_decimals,'',dokan_refund.mon_decimal_point)).change();},amount_changed:function(){var total=accounting.unformat($(this).val(),dokan_refund.mon_decimal_point);$('button .wc-order-refund-amount .amount').text(accounting.formatMoney(total,{symbol:dokan_refund.currency_format_symbol,decimal:dokan_refund.currency_format_decimal_sep,thousand:dokan_refund.currency_format_thousand_sep,precision:dokan_refund.currency_format_num_decimals,format:dokan_refund.currency_format}));},refund_quantity_changed:function(){var $row=$(this).closest('tr.item');var qty=$row.find('input.quantity').val();var refund_qty=$(this).val();var line_total=$('input.line_total',$row);var refund_line_total=$('input.refund_line_total',$row);var unit_total=accounting.unformat(line_total.attr('data-total'),dokan_refund.mon_decimal_point)/qty;refund_line_total.val(parseFloat(accounting.formatNumber(unit_total*refund_qty,dokan_refund.rounding_precision,'')).toString().replace('.',dokan_refund.mon_decimal_point)).change();$('td.line_tax',$row).each(function(){var line_total_tax=$('input.line_tax',$(this));var refund_line_total_tax=$('input.refund_line_tax',$(this));var unit_total_tax=accounting.unformat(line_total_tax.attr('data-total_tax'),dokan_refund.mon_decimal_point)/qty;if(0<unit_total_tax){refund_line_total_tax.val(parseFloat(accounting.formatNumber(unit_total_tax*refund_qty,dokan_refund.rounding_precision,'')).toString().replace('.',dokan_refund.mon_decimal_point)).change();}else{refund_line_total_tax.val(0).change();}});if(refund_qty>0){$('#restock_refunded_items').closest('tr').show();}else{$('#restock_refunded_items').closest('tr').hide();$('.woocommerce_order_items input.refund_order_item_qty').each(function(){if($(this).val()>0){$('#restock_refunded_items').closest('tr').show();}});}
$(this).trigger('refund_quantity_changed');}},};dokan_seller_meta_boxes_order_items.init();})(jQuery);;(function($){var variantsHolder=$('#variants-holder');var product_gallery_frame;var product_featured_frame;var $image_gallery_ids=$('#product_image_gallery');var $product_images=$('#product_images_container ul.product_images');var Dokan_Editor={init:function(){product_type='simple';$('.product-edit-container').on('click','.dokan-section-heading',this.toggleProductSection);$('.product-edit-container').on('click','input[type=checkbox]#_downloadable',this.downloadable);$('.product-edit-container').on('click','a.sale-schedule',this.showDiscountSchedule);$('body, #dokan-product-images').on('click','a.add-product-images',this.gallery.addImages);$('body, #dokan-product-images').on('click','a.action-delete',this.gallery.deleteImage);$('body, #dokan-product-images').on('click','a.delete',this.gallery.deleteImage);this.gallery.sortable();$('body, .product-edit-container').on('click','a.dokan-feat-image-btn',this.featuredImage.addImage);$('body, .product-edit-container').on('click','a.dokan-remove-feat-image',this.featuredImage.removeImage);$('body, #variable_product_options').on('click','.sale_schedule',this.saleSchedule);$('body, #variable_product_options').on('click','.cancel_sale_schedule',this.cancelSchedule);$('.product-edit-container').on('change','input[type=checkbox]#_manage_stock',this.showManageStock);$('.product-edit-container').on('click','a.upload_file_button',this.fileDownloadable);$('body').on('click','a.insert-file-row',function(){$(this).closest('table').find('tbody').append($(this).data('row'));return false;});$('body').on('click','a.delete',function(){$(this).closest('tr').remove();return false;});$('body').on('submit','form.dokan-product-edit-form',this.inputValidate);$('.dokan-product-listing').on('click','a.dokan-add-new-product',this.addProductPopup);this.loadSelect2();this.attribute.sortable();this.checkProductPostboxToggle();$('.product-edit-container .dokan-product-attribute-wrapper').on('click','a.dokan-product-toggle-attribute, .dokan-product-attribute-heading',this.attribute.toggleAttribute);$('.product-edit-container .dokan-product-attribute-wrapper').on('click','a.add_new_attribute',this.attribute.addNewAttribute);$('.product-edit-container .dokan-product-attribute-wrapper').on('keyup','input.dokan-product-attribute-name',this.attribute.dynamicAttrNameChange);$('.dokan-product-attribute-wrapper ul.dokan-attribute-option-list').on('click','button.dokan-select-all-attributes',this.attribute.selectAllAttr);$('.dokan-product-attribute-wrapper ul.dokan-attribute-option-list').on('click','button.dokan-select-no-attributes',this.attribute.selectNoneAttr);$('.dokan-product-attribute-wrapper ul.dokan-attribute-option-list').on('click','button.dokan-add-new-attribute',this.attribute.addNewExtraAttr);$('.product-edit-container .dokan-product-attribute-wrapper').on('click','a.dokan-product-remove-attribute',this.attribute.removeAttribute);$('.product-edit-container .dokan-product-attribute-wrapper').on('click','a.dokan-save-attribute',this.attribute.saveAttribute);$('body').on('click','.product-container-footer input[type="submit"]',this.createNewProduct);this.attribute.disbalePredefinedAttribute();},saleSchedule:function(){var $wrap=$(this).closest('.dokan-product-field-content','div, table');$(this).hide();$wrap.find('.cancel_sale_schedule').show();$wrap.find('.sale_price_dates_fields').show();return false;},cancelSchedule:function(){var $wrap=$(this).closest('.dokan-product-field-content','div, table');$(this).hide();$wrap.find('.sale_schedule').show();$wrap.find('.sale_price_dates_fields').hide();$wrap.find('.sale_price_dates_fields').find('input').val('');return false;},checkProductPostboxToggle:function(){var toggle=JSON.parse(localStorage.getItem('toggleClasses'));$.each(toggle,function(el,i){var wrapper=$('.'+el.replace(/_/g,'-')),content=wrapper.find('.dokan-section-content'),targetIcon=wrapper.find('i.fa-sort-desc');if(i){content.show();targetIcon.removeClass('fa-flip-horizointal').addClass('fa-flip-vertical');targetIcon.css('marginTop','9px');}else{content.hide();targetIcon.removeClass('fa-flip-vertical').addClass('fa-flip-horizointal');targetIcon.css('marginTop','0px');}});},toggleProductSection:function(e){e.preventDefault();var self=$(this);if(JSON.parse(localStorage.getItem('toggleClasses'))!=null){var toggleClasses=JSON.parse(localStorage.getItem('toggleClasses'));}else{var toggleClasses={};}
self.closest('.dokan-edit-row').find('.dokan-section-content').slideToggle(300,function(){if($(this).is(':visible')){var targetIcon=self.find('i.fa-sort-desc');targetIcon.removeClass('fa-flip-horizointal').addClass('fa-flip-vertical');targetIcon.css('marginTop','9px');toggleClasses[self.data('togglehandler')]=true;}else{var targetIcon=self.find('i.fa-sort-desc');targetIcon.removeClass('fa-flip-vertical').addClass('fa-flip-horizointal');targetIcon.css('marginTop','0px');toggleClasses[self.data('togglehandler')]=false;}
localStorage.setItem('toggleClasses',JSON.stringify(toggleClasses));});},loadSelect2:function(){$('.dokan-select2').select2({"language":{"noResults":function(){return dokan.i18n_no_result_found;}}});},addProductPopup:function(e){e.preventDefault();Dokan_Editor.openProductPopup();},openProductPopup:function(){var productTemplate=wp.template('dokan-add-new-product');$.magnificPopup.open({fixedContentPos:true,items:{src:productTemplate().trim(),type:'inline'},callbacks:{open:function(){$(this.content).closest('.mfp-wrap').removeAttr('tabindex');Dokan_Editor.loadSelect2();$('.sale_price_dates_from, .sale_price_dates_to').on('focus',function(){$(this).css('z-index','99999');});$(".sale_price_dates_fields input").datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1});$('.tips').tooltip();Dokan_Editor.gallery.sortable();},close:function(){product_gallery_frame=undefined;product_featured_frame=undefined;}}});},createNewProduct:function(e){e.preventDefault();var self=$(this),form=self.closest('form#dokan-add-new-product-form'),btn_id=self.attr('data-btn_id');form.find('span.dokan-show-add-product-error').html('');form.find('span.dokan-add-new-product-spinner').css('display','inline-block');self.attr('disabled','disabled');if(form.find('input[name="post_title"]').val()==''){$('span.dokan-show-add-product-error').html(dokan.product_title_required);self.removeAttr('disabled');form.find('span.dokan-add-new-product-spinner').css('display','none');return;}
if(form.find('select[name="product_cat"]').val()=='-1'){$('span.dokan-show-add-product-error').html(dokan.product_category_required);self.removeAttr('disabled');form.find('span.dokan-add-new-product-spinner').css('display','none');return;}
var data={action:'dokan_create_new_product',postdata:form.serialize(),_wpnonce:dokan.nonce};$.post(dokan.ajaxurl,data,function(resp){if(resp.success){self.removeAttr('disabled');if(btn_id=='create_new'){$.magnificPopup.close();window.location.href=resp.data;}else{$('.dokan-dahsboard-product-listing-wrapper').load(window.location.href+' table.product-listing-table');$.magnificPopup.close();Dokan_Editor.openProductPopup();}}else{self.removeAttr('disabled');$('span.dokan-show-add-product-error').html(resp.data);}
form.find('span.dokan-add-new-product-spinner').css('display','none');});},attribute:{toggleAttribute:function(e){e.preventDefault();var self=$(this),list=self.closest('li'),item=list.find('.dokan-product-attribute-item');if($(item).hasClass('dokan-hide')){self.closest('.dokan-product-attribute-heading').css({borderBottom:'1px solid #e3e3e3'});$(item).slideDown(200,function(){self.find('i.fa').removeClass('fa-flip-horizointal').addClass('fa-flip-vertical');$(this).removeClass('dokan-hide');if(!$(e.target).hasClass('dokan-product-attribute-heading')){$(e.target).closest('a').css('top','12px');}else if($(e.target).hasClass('dokan-product-attribute-heading')){self.find('a.dokan-product-toggle-attribute').css('top','12px');}});}else{$(item).slideUp(200,function(){$(this).addClass('dokan-hide');self.find('i.fa').removeClass('fa-flip-vertical').addClass('fa-flip-horizointal');if(!$(e.target).hasClass('dokan-product-attribute-heading')){$(e.target).closest('a').css('top','7px');}else if($(e.target).hasClass('dokan-product-attribute-heading')){self.find('a.dokan-product-toggle-attribute').css('top','7px');}
self.closest('.dokan-product-attribute-heading').css({borderBottom:'none'});})}
return false;},sortable:function(){$('.dokan-product-attribute-wrapper ul').sortable({items:'li.product-attribute-list',cursor:'move',scrollSensitivity:40,forcePlaceholderSize:true,forceHelperSize:false,helper:'clone',opacity:0.65,placeholder:'dokan-sortable-placeholder',start:function(event,ui){ui.item.css('background-color','#f6f6f6');},stop:function(event,ui){ui.item.removeAttr('style');},update:function(event,ui){var attachment_ids='';Dokan_Editor.attribute.reArrangeAttribute();}});},dynamicAttrNameChange:function(e){e.preventDefault();var self=$(this),value=self.val();if(value==''){self.closest('li').find('strong').html('Attribute Name');}else{self.closest('li').find('strong').html(value);}},selectAllAttr:function(e){e.preventDefault();$(this).closest('li.product-attribute-list').find('select.dokan_attribute_values option').attr('selected','selected');$(this).closest('li.product-attribute-list').find('select.dokan_attribute_values').change();return false;},selectNoneAttr:function(e){e.preventDefault();$(this).closest('li.product-attribute-list').find('select.dokan_attribute_values option').removeAttr('selected');$(this).closest('li.product-attribute-list').find('select.dokan_attribute_values').change();return false;},reArrangeAttribute:function(){var attributeWrapper=$('.dokan-product-attribute-wrapper').find('ul.dokan-attribute-option-list');attributeWrapper.find('li.product-attribute-list').css('cursor','default').each(function(i){$(this).find('.attribute_position').val(i);});},addNewExtraAttr:function(e){e.preventDefault();var $wrapper=$(this).closest('li.product-attribute-list');var attribute=$wrapper.data('taxonomy');var new_attribute_name=window.prompt(dokan.new_attribute_prompt);if(new_attribute_name){var data={action:'dokan_add_new_attribute',taxonomy:attribute,term:new_attribute_name,_wpnonce:dokan.nonce};$.post(dokan.ajaxurl,data,function(response){if(response.error){window.alert(response.error);}else if(response.slug){$wrapper.find('select.dokan_attribute_values').append('<option value="'+response.slug+'" selected="selected">'+response.name+'</option>');$wrapper.find('select.dokan_attribute_values').change();}});}},addNewAttribute:function(e){e.preventDefault();var self=$(this),attrWrap=self.closest('.dokan-attribute-type').find('select#predefined_attribute'),attribute=attrWrap.val(),size=$('ul.dokan-attribute-option-list .product-attribute-list').length;var data={action:'dokan_get_pre_attribute',taxonomy:attribute,i:size,_wpnonce:dokan.nonce};self.closest('.dokan-attribute-type').find('span.dokan-attribute-spinner').removeClass('dokan-hide');$.post(dokan.ajaxurl,data,function(resp){if(resp.success){var attributeWrapper=$('.dokan-product-attribute-wrapper').find('ul.dokan-attribute-option-list');$html=$.parseHTML(resp.data);$($html).find('.dokan-product-attribute-item').removeClass('dokan-hide');$($html).find('i.fa.fa-sort-desc').removeClass('fa-flip-horizointal').addClass('fa-flip-vertical');$($html).find('a.dokan-product-toggle-attribute').css('top','12px');$($html).find('.dokan-product-attribute-heading').css({borderBottom:'1px solid #e3e3e3'});attributeWrapper.append($html);$('select#product_type').trigger('change');Dokan_Editor.loadSelect2();Dokan_Editor.attribute.reArrangeAttribute();};self.closest('.dokan-attribute-type').find('span.dokan-attribute-spinner').addClass('dokan-hide');if(attribute){attrWrap.find('option[value="'+attribute+'"]').attr('disabled','disabled');attrWrap.val('');}});},removeAttribute:function(evt){evt.stopPropagation();if(window.confirm(dokan.remove_attribute)){var $parent=$(this).closest('li.product-attribute-list');$parent.fadeOut(300,function(){if($parent.is('.taxonomy')){$('select.dokan_attribute_taxonomy').find('option[value="'+$parent.data('taxonomy')+'"]').removeAttr('disabled');}
$(this).remove();Dokan_Editor.attribute.reArrangeAttribute();});}
return false;},saveAttribute:function(e){e.preventDefault();var self=$(this),data={post_id:$('#dokan-edit-product-id').val(),data:$('ul.dokan-attribute-option-list').find('input, select, textarea').serialize(),action:'dokan_save_attributes'};$('.dokan-product-attribute-wrapper').block({message:null,fadeIn:50,fadeOut:1000,overlayCSS:{background:'#fff',opacity:0.6}});$.post(dokan.ajaxurl,data,function(resp){$('#dokan-variable-product-options').load(window.location.toString()+' #dokan-variable-product-options-inner',function(){$('#dokan-variable-product-options').trigger('reload');$('select#product_type').trigger('change');$('.dokan-product-attribute-wrapper').unblock();});});},disbalePredefinedAttribute:function(){$('ul.dokan-attribute-option-list li.product-attribute-list').each(function(index,el){if($(el).css('display')!=='none'&&$(el).is('.taxonomy')){$('select#predefined_attribute').find('option[value="'+$(el).data('taxonomy')+'"]').attr('disabled','disabled');}});}},inputValidate:function(e){e.preventDefault();if($('#post_title').val().trim()==''){$('#post_title').focus();$('div.dokan-product-title-alert').removeClass('dokan-hide');return;}else{$('div.dokan-product-title-alert').hide();}
if($('select.product_cat').val()==-1){$('select.product_cat').focus();$('div.dokan-product-cat-alert').removeClass('dokan-hide');return;}else{$('div.dokan-product-cat-alert').hide();}
$('input[type=submit]').attr('disabled','disabled');this.submit();},downloadable:function(){if($(this).prop('checked')){$(this).closest('aside').find('.dokan-side-body').removeClass('dokan-hide');}else{$(this).closest('aside').find('.dokan-side-body').addClass('dokan-hide');}},showDiscountSchedule:function(e){e.preventDefault();$('.sale-schedule-container').slideToggle('fast');},showManageStock:function(e){if($(this).is(':checked')){$('.show_if_stock').slideDown('fast');}else{$('.show_if_stock').slideUp('fast');}},gallery:{addImages:function(e){e.preventDefault();var self=$(this),p_images=self.closest('.dokan-product-gallery').find('#product_images_container ul.product_images'),images_gid=self.closest('.dokan-product-gallery').find('#product_image_gallery');if(product_gallery_frame){product_gallery_frame.open();return;}else{product_gallery_frame=wp.media({title:dokan.i18n_choose_gallery,button:{text:dokan.i18n_choose_gallery_btn_text,},multiple:true});product_gallery_frame.on('select',function(){var selection=product_gallery_frame.state().get('selection');selection.map(function(attachment){attachment=attachment.toJSON();if(attachment.id){attachment_ids=[];$('<li class="image" data-attachment_id="'+attachment.id+'">\
                                        <img src="'+attachment.url+'" />\
                                        <a href="#" class="action-delete">&times;</a>\
                                    </li>').insertBefore(p_images.find('li.add-image'));$('#product_images_container ul li.image').css('cursor','default').each(function(){var attachment_id=jQuery(this).attr('data-attachment_id');attachment_ids.push(attachment_id);});}});images_gid.val(attachment_ids.join(','));});product_gallery_frame.open();}},deleteImage:function(e){e.preventDefault();var self=$(this),p_images=self.closest('.dokan-product-gallery').find('#product_images_container ul.product_images'),images_gid=self.closest('.dokan-product-gallery').find('#product_image_gallery');self.closest('li.image').remove();var attachment_ids=[];$('#product_images_container ul li.image').css('cursor','default').each(function(){var attachment_id=$(this).attr('data-attachment_id');attachment_ids.push(attachment_id);});images_gid.val(attachment_ids.join(','));return false;},sortable:function(){$('body').find('#product_images_container ul.product_images').sortable({items:'li.image',cursor:'move',scrollSensitivity:40,forcePlaceholderSize:true,forceHelperSize:false,helper:'clone',opacity:0.65,placeholder:'dokan-sortable-placeholder',start:function(event,ui){ui.item.css('background-color','#f6f6f6');},stop:function(event,ui){ui.item.removeAttr('style');},update:function(event,ui){var attachment_ids=[];$('body').find('#product_images_container ul li.image').css('cursor','default').each(function(){var attachment_id=jQuery(this).attr('data-attachment_id');attachment_ids.push(attachment_id);});$('body').find('#product_image_gallery').val(attachment_ids.join(','));}});}},featuredImage:{addImage:function(e){e.preventDefault();var self=$(this);if(product_featured_frame){product_featured_frame.open();return;}else{product_featured_frame=wp.media({title:dokan.i18n_choose_featured_img,button:{text:dokan.i18n_choose_featured_img_btn_text,}});product_featured_frame.on('select',function(){var selection=product_featured_frame.state().get('selection');selection.map(function(attachment){attachment=attachment.toJSON();self.siblings('input.dokan-feat-image-id').val(attachment.id);var instruction=self.closest('.instruction-inside');var wrap=instruction.siblings('.image-wrap');wrap.find('img').attr('src',attachment.url);wrap.find('img').removeAttr('srcset');instruction.addClass('dokan-hide');wrap.removeClass('dokan-hide');});});product_featured_frame.open();}},removeImage:function(e){e.preventDefault();var self=$(this);var wrap=self.closest('.image-wrap');var instruction=wrap.siblings('.instruction-inside');instruction.find('input.dokan-feat-image-id').val('0');wrap.addClass('dokan-hide');instruction.removeClass('dokan-hide');}},fileDownloadable:function(e){e.preventDefault();var self=$(this),downloadable_frame;if(downloadable_frame){downloadable_frame.open();return;}
downloadable_frame=wp.media({title:dokan.i18n_choose_file,button:{text:dokan.i18n_choose_file_btn_text,},multiple:true});downloadable_frame.on('select',function(){var selection=downloadable_frame.state().get('selection');selection.map(function(attachment){attachment=attachment.toJSON();self.closest('tr').find('input.wc_file_url, input.wc_variation_file_url').val(attachment.url);});});downloadable_frame.on('ready',function(){downloadable_frame.uploader.options.uploader.params={type:'downloadable_product'};});downloadable_frame.open();}};$(function(){Dokan_Editor.init();$('select#product_type').change(function(){var select_val=$(this).val();if('variable'===select_val){$('input#_manage_stock').change();$('input#_downloadable').prop('checked',false);$('input#_virtual').removeAttr('checked');}
show_and_hide_panels();$(document.body).trigger('dokan-product-type-change',select_val,$(this));}).change();$('.product-edit-container').on('change','input#_downloadable, input#_virtual',function(){show_and_hide_panels();}).change();$('input#_downloadable').change();$('input#_virtual').change();function show_and_hide_panels(){var product_type=$('#product_type').val();var is_virtual=$('input#_virtual:checked').length;var is_downloadable=$('input#_downloadable:checked').length;var hide_classes='.hide_if_downloadable, .hide_if_virtual';var show_classes='.show_if_downloadable, .show_if_virtual';$.each(['simple','variable','grouped'],function(index,value){hide_classes=hide_classes+', .hide_if_'+value;show_classes=show_classes+', .show_if_'+value;});$(hide_classes).show();$(show_classes).hide();if(is_downloadable){$('.show_if_downloadable').show();}
if(is_virtual){$('.show_if_virtual').show();}
$('.show_if_'+product_type).show();if(is_downloadable){$('.hide_if_downloadable').hide();}
if(is_virtual){$('.hide_if_virtual').hide();}
$('.hide_if_'+product_type).hide();$('input#_manage_stock').change();}
$('.sale_price_dates_fields').each(function(){var $these_sale_dates=$(this);var sale_schedule_set=false;var $wrap=$these_sale_dates.closest('div, table');$these_sale_dates.find('input').each(function(){if(''!==$(this).val()){sale_schedule_set=true;}});if(sale_schedule_set){$wrap.find('.sale_schedule').hide();$wrap.find('.sale_price_dates_fields').show();}else{$wrap.find('.sale_schedule').show();$wrap.find('.sale_price_dates_fields').hide();}});$('.product-edit-container').on('click','.sale_schedule',function(){var $wrap=$(this).closest('.product-edit-container, div.dokan-product-variation-itmes, table');$(this).hide();$wrap.find('.cancel_sale_schedule').show();$wrap.find('.sale_price_dates_fields').show();return false;});$('.product-edit-container').on('click','.cancel_sale_schedule',function(){var $wrap=$('.product-edit-container, div.dokan-product-variation-itmes, table');$(this).hide();$wrap.find('.sale_schedule').show();$wrap.find('.sale_price_dates_fields').hide();$wrap.find('.sale_price_dates_fields').find('input').val('');return false;});$("input.dokan-product-regular-price, input.dokan-product-sales-price").on('keyup',function(){if(dokan.commission_type=='percentage'){if($('input.dokan-product-sales-price').val()==''){$('span.vendor-price').html(parseFloat(accounting.formatNumber((($('input.dokan-product-regular-price').val()*dokan.vendor_percentage)/100),dokan.rounding_precision,'')).toString().replace('.',dokan.mon_decimal_point));}else{$('span.vendor-price').html(parseFloat(accounting.formatNumber((($('input.dokan-product-sales-price').val()*dokan.vendor_percentage)/100),dokan.rounding_precision,'')).toString().replace('.',dokan.mon_decimal_point));}}else{if($('input.dokan-product-sales-price').val()==''){$('span.vendor-price').html(parseFloat(accounting.formatNumber(($('input.dokan-product-regular-price').val()-(100-dokan.vendor_percentage)),dokan.rounding_precision,'')).toString().replace('.',dokan.mon_decimal_point));}else{$('span.vendor-price').html(parseFloat(accounting.formatNumber(($('input.dokan-product-sales-price').val()-(100-dokan.vendor_percentage)),dokan.rounding_precision,'')).toString().replace('.',dokan.mon_decimal_point));}}
if($('#product_type').val()=='simple'){if(Number($('span.vendor-price').text())<0){$($('.dokan-product-less-price-alert').removeClass('dokan-hide'));$('input[type=submit]').attr('disabled','disabled');}else{$('input[type=submit]').removeAttr('disabled');$($('.dokan-product-less-price-alert').addClass('dokan-hide'));}}
$('#product_type').on('change',function(){var self=$(this);if(self.val()=='variable'||self.val()=='grouped'){$('input[type=submit]').removeAttr('disabled');}else{if(Number($('span.vendor-price').text())>0){$('input[type=submit]').removeAttr('disabled');$($('.dokan-product-less-price-alert').addClass('dokan-hide'));}else{$($('.dokan-product-less-price-alert').removeClass('dokan-hide'));$('input[type=submit]').attr('disabled','disabled');}}});}).trigger('keyup');});})(jQuery);jQuery(function($){var api=wp.customize;$('.datepicker').datepicker({dateFormat:'yy-mm-dd'});$('.tips').tooltip();function showTooltip(x,y,contents){jQuery('<div class="chart-tooltip">'+contents+'</div>').css({top:y-16,left:x+20}).appendTo("body").fadeIn(200);}
var prev_data_index=null;var prev_series_index=null;jQuery(".chart-placeholder").bind("plothover",function(event,pos,item){if(item){if(prev_data_index!=item.dataIndex||prev_series_index!=item.seriesIndex){prev_data_index=item.dataIndex;prev_series_index=item.seriesIndex;jQuery(".chart-tooltip").remove();if(item.series.points.show||item.series.enable_tooltip){var y=item.series.data[item.dataIndex][1];tooltip_content='';if(item.series.prepend_label)
tooltip_content=tooltip_content+item.series.label+": ";if(item.series.prepend_tooltip)
tooltip_content=tooltip_content+item.series.prepend_tooltip;tooltip_content=tooltip_content+y;if(item.series.append_tooltip)
tooltip_content=tooltip_content+item.series.append_tooltip;if(item.series.pie.show){showTooltip(pos.pageX,pos.pageY,tooltip_content);}else{showTooltip(item.pageX,item.pageY,tooltip_content);}}}}else{jQuery(".chart-tooltip").remove();prev_data_index=null;}});});jQuery(function($){$('.user-role input[type=radio]').on('change',function(){var value=$(this).val();if(value==='seller'){$('.show_if_seller').slideDown();if($('.tc_check_box').length>0)
$('input[name=register]').attr('disabled','disabled');}else{$('.show_if_seller').slideUp();if($('.tc_check_box').length>0)
$('input[name=register]').removeAttr('disabled');}});$('.tc_check_box').on('click',function(){var chk_value=$(this).val();if($(this).prop("checked")){$('input[name=register]').removeAttr('disabled');$('input[name=dokan_migration]').removeAttr('disabled');}else{$('input[name=register]').attr('disabled','disabled');$('input[name=dokan_migration]').attr('disabled','disabled');}});if($('.tc_check_box').length>0){$('input[name=dokan_migration]').attr('disabled','disabled');}
$('#company-name').on('focusout',function(){var value=getSlug($(this).val());$('#seller-url').val(value);$('#url-alart').text(value);$('#seller-url').focus();});$('#seller-url').keydown(function(e){var text=$(this).val();if($.inArray(e.keyCode,[46,8,9,27,13,91,109,110,173,189,190])!==-1||(e.keyCode==65&&e.ctrlKey===true)||(e.keyCode>=35&&e.keyCode<=39)){return;}
if((e.shiftKey||(e.keyCode<65||e.keyCode>90)&&(e.keyCode<48||e.keyCode>57))&&(e.keyCode<96||e.keyCode>105)){e.preventDefault();}});$('#seller-url').keyup(function(e){$('#url-alart').text($(this).val());});$('#shop-phone').keydown(function(e){if($.inArray(e.keyCode,[46,8,9,27,13,91,107,109,110,187,189,190])!==-1||(e.keyCode==65&&e.ctrlKey===true)||(e.keyCode>=35&&e.keyCode<=39)){return;}
if((e.shiftKey||(e.keyCode<48||e.keyCode>57))&&(e.keyCode<96||e.keyCode>105)){e.preventDefault();}});$('#seller-url').on('focusout',function(){var self=$(this),data={action:'shop_url',url_slug:self.val(),_nonce:dokan.nonce,};if(self.val()===''){return;}
var row=self.closest('.form-row');row.block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:0.6}});$.post(dokan.ajaxurl,data,function(resp){if(resp.success===true){$('#url-alart').removeClass('text-danger').addClass('text-success');$('#url-alart-mgs').removeClass('text-danger').addClass('text-success').text(dokan.seller.available);}else{$('#url-alart').removeClass('text-success').addClass('text-danger');$('#url-alart-mgs').removeClass('text-success').addClass('text-danger').text(dokan.seller.notAvailable);}
row.unblock();});});});(function($){$.validator.setDefaults({ignore:":hidden"});var validatorError=function(error,element){var form_group=$(element).closest('.form-group');form_group.addClass('has-error').append(error);};var validatorSuccess=function(label,element){$(element).closest('.form-group').removeClass('has-error');};var api=wp.customize;var Dokan_Settings={init:function(){var self=this;$('a.dokan-banner-drag').on('click',this.imageUpload);$('a.dokan-remove-banner-image').on('click',this.removeBanner);$('a.dokan-pro-gravatar-drag').on('click',this.gragatarImageUpload);$('a.dokan-gravatar-drag').on('click',this.simpleImageUpload);$('a.dokan-remove-gravatar-image').on('click',this.removeGravatar);this.validateForm(self);return false;},calculateImageSelectOptions:function(attachment,controller){var xInit=parseInt(dokan.store_banner_dimension.width,10),yInit=parseInt(dokan.store_banner_dimension.height,10),flexWidth=!!parseInt(dokan.store_banner_dimension['flex-width'],10),flexHeight=!!parseInt(dokan.store_banner_dimension['flex-height'],10),ratio,xImg,yImg,realHeight,realWidth,imgSelectOptions;realWidth=attachment.get('width');realHeight=attachment.get('height');this.headerImage=new api.HeaderTool.ImageModel();this.headerImage.set({themeWidth:xInit,themeHeight:yInit,themeFlexWidth:flexWidth,themeFlexHeight:flexHeight,imageWidth:realWidth,imageHeight:realHeight});controller.set('canSkipCrop',!this.headerImage.shouldBeCropped());ratio=xInit/yInit;xImg=realWidth;yImg=realHeight;if(xImg/yImg>ratio){yInit=yImg;xInit=yInit*ratio;}else{xInit=xImg;yInit=xInit/ratio;}
imgSelectOptions={handles:true,keys:true,instance:true,persistent:true,imageWidth:realWidth,imageHeight:realHeight,x1:0,y1:0,x2:xInit,y2:yInit};if(flexHeight===false&&flexWidth===false){imgSelectOptions.aspectRatio=xInit+':'+yInit;}
if(flexHeight===false){imgSelectOptions.maxHeight=yInit;}
if(flexWidth===false){imgSelectOptions.maxWidth=xInit;}
return imgSelectOptions;},onSelect:function(){this.frame.setState('cropper');},onCropped:function(croppedImage){var url=croppedImage.url,attachmentId=croppedImage.attachment_id,w=croppedImage.width,h=croppedImage.height;this.setImageFromURL(url,attachmentId,w,h);},onSkippedCrop:function(selection){var url=selection.get('url'),w=selection.get('width'),h=selection.get('height');this.setImageFromURL(url,selection.id,w,h);},setImageFromURL:function(url,attachmentId,width,height){if($(this.uploadBtn).hasClass('dokan-banner-drag')){var wrap=$(this.uploadBtn).closest('.dokan-banner');wrap.find('input.dokan-file-field').val(attachmentId);wrap.find('img.dokan-banner-img').attr('src',url);$(this.uploadBtn).parent().siblings('.image-wrap',wrap).removeClass('dokan-hide');$(this.uploadBtn).parent('.button-area').addClass('dokan-hide');}else if($(this.uploadBtn).hasClass('dokan-pro-gravatar-drag')){var wrap=$(this.uploadBtn).closest('.dokan-gravatar');wrap.find('input.dokan-file-field').val(attachmentId);wrap.find('img.dokan-gravatar-img').attr('src',url);$(this.uploadBtn).parent().siblings('.gravatar-wrap',wrap).removeClass('dokan-hide');$(this.uploadBtn).parent('.gravatar-button-area').addClass('dokan-hide');}},removeImage:function(){api.HeaderTool.currentHeader.trigger('hide');api.HeaderTool.CombinedList.trigger('control:removeImage');},imageUpload:function(e){e.preventDefault();var file_frame,settings=Dokan_Settings;settings.uploadBtn=this;settings.frame=wp.media({multiple:false,button:{text:dokan.selectAndCrop,close:false},states:[new wp.media.controller.Library({title:dokan.chooseImage,library:wp.media.query({type:'image'}),multiple:false,date:false,priority:20,suggestedWidth:dokan.store_banner_dimension.width,suggestedHeight:dokan.store_banner_dimension.height}),new wp.media.controller.Cropper({suggestedWidth:5000,imgSelectOptions:settings.calculateImageSelectOptions})]});settings.frame.on('select',settings.onSelect,settings);settings.frame.on('cropped',settings.onCropped,settings);settings.frame.on('skippedcrop',settings.onSkippedCrop,settings);settings.frame.open();},calculateImageSelectOptionsProfile:function(attachment,controller){var xInit=150,yInit=150,flexWidth=!!parseInt(dokan.store_banner_dimension['flex-width'],10),flexHeight=!!parseInt(dokan.store_banner_dimension['flex-height'],10),ratio,xImg,yImg,realHeight,realWidth,imgSelectOptions;realWidth=attachment.get('width');realHeight=attachment.get('height');this.headerImage=new api.HeaderTool.ImageModel();this.headerImage.set({themeWidth:xInit,themeHeight:yInit,themeFlexWidth:flexWidth,themeFlexHeight:flexHeight,imageWidth:realWidth,imageHeight:realHeight});controller.set('canSkipCrop',!this.headerImage.shouldBeCropped());ratio=xInit/yInit;xImg=realWidth;yImg=realHeight;if(xImg/yImg>ratio){yInit=yImg;xInit=yInit*ratio;}else{xInit=xImg;yInit=xInit/ratio;}
imgSelectOptions={handles:true,keys:true,instance:true,persistent:true,imageWidth:realWidth,imageHeight:realHeight,x1:0,y1:0,x2:xInit,y2:yInit};if(flexHeight===false&&flexWidth===false){imgSelectOptions.aspectRatio=xInit+':'+yInit;}
if(flexHeight===false){imgSelectOptions.maxHeight=yInit;}
if(flexWidth===false){imgSelectOptions.maxWidth=xInit;}
return imgSelectOptions;},simpleImageUpload:function(e){e.preventDefault();var file_frame,self=$(this);if(file_frame){file_frame.open();return;}
file_frame=wp.media.frames.file_frame=wp.media({title:jQuery(this).data('uploader_title'),button:{text:jQuery(this).data('uploader_button_text')},multiple:false});file_frame.on('select',function(){var attachment=file_frame.state().get('selection').first().toJSON();var wrap=self.closest('.dokan-gravatar');wrap.find('input.dokan-file-field').val(attachment.id);wrap.find('img.dokan-gravatar-img').attr('src',attachment.url);self.parent().siblings('.gravatar-wrap',wrap).removeClass('dokan-hide');self.parent('.gravatar-button-area').addClass('dokan-hide');});file_frame.open();},gragatarImageUpload:function(e){e.preventDefault();var file_frame,settings=Dokan_Settings;settings.uploadBtn=this;settings.frame=wp.media({multiple:false,button:{text:dokan.selectAndCrop,close:false},states:[new wp.media.controller.Library({title:dokan.chooseImage,library:wp.media.query({type:'image'}),multiple:false,date:false,priority:20,suggestedWidth:150,suggestedHeight:150}),new wp.media.controller.Cropper({imgSelectOptions:settings.calculateImageSelectOptionsProfile})]});settings.frame.on('select',settings.onSelect,settings);settings.frame.on('cropped',settings.onCropped,settings);settings.frame.on('skippedcrop',settings.onSkippedCrop,settings);settings.frame.open();},submitSettings:function(form_id){if(typeof tinyMCE!='undefined'){tinyMCE.triggerSave();}
var self=$("form#"+form_id),form_data=self.serialize()+'&action=dokan_settings&form_id='+form_id;self.find('.ajax_prev').append('<span class="dokan-loading"> </span>');$.post(dokan.ajaxurl,form_data,function(resp){self.find('span.dokan-loading').remove();$('html,body').animate({scrollTop:100});if(resp.success){$('.dokan-ajax-response').html($('<div/>',{'class':'dokan-alert dokan-alert-success','html':'<p>'+resp.data.msg+'</p>',}));$('.dokan-ajax-response').append(resp.data.progress);}else{$('.dokan-ajax-response').html($('<div/>',{'class':'dokan-alert dokan-alert-danger','html':'<p>'+resp.data+'</p>'}));}});},validateForm:function(self){$("form#settings-form, form#profile-form, form#store-form, form#payment-form").validate({submitHandler:function(form){self.submitSettings(form.getAttribute('id'));},errorElement:'span',errorClass:'error',errorPlacement:validatorError,success:validatorSuccess});},removeBanner:function(e){e.preventDefault();var self=$(this);var wrap=self.closest('.image-wrap');var instruction=wrap.siblings('.button-area');wrap.find('input.dokan-file-field').val('0');wrap.addClass('dokan-hide');instruction.removeClass('dokan-hide');},removeGravatar:function(e){e.preventDefault();var self=$(this);var wrap=self.closest('.gravatar-wrap');var instruction=wrap.siblings('.gravatar-button-area');wrap.find('input.dokan-file-field').val('0');wrap.addClass('dokan-hide');instruction.removeClass('dokan-hide');},};var Dokan_Withdraw={init:function(){var self=this;this.withdrawValidate(self);},withdrawValidate:function(self){$('form.withdraw').validate({errorElement:'span',errorClass:'error',errorPlacement:validatorError,success:validatorSuccess})}};var Dokan_Seller={init:function(){this.validate(this);},validate:function(self){$('form#dokan-form-contact-seller').validate({errorPlacement:validatorError,success:validatorSuccess,submitHandler:function(form){$(form).block({message:null,overlayCSS:{background:'#fff url('+dokan.ajax_loader+') no-repeat center',opacity:0.6}});var form_data=$(form).serialize();$.post(dokan.ajaxurl,form_data,function(resp){$(form).unblock();if(typeof resp.data!=='undefined'){$(form).find('.ajax-response').html(resp.data);}
$(form).find('input[type=text], input[type=email], textarea').val('').removeClass('valid');});}});}};var Dokan_Add_Seller={init:function(){this.validate(this);},validate:function(self){$('form.register').validate({errorPlacement:validatorError,success:validatorSuccess,submitHandler:function(form){form.submit();}});}};$(function(){Dokan_Settings.init();Dokan_Withdraw.init();Dokan_Seller.init();Dokan_Add_Seller.init();$('.dokan-form-horizontal').on('change','input[type=checkbox]#lbl_setting_minimum_quantity',function(){var showSWDiscount=$('.show_if_needs_sw_discount');if($(this).is(':checked')){showSWDiscount.find('input[type="number"]').val('');showSWDiscount.slideDown('slow');}else{showSWDiscount.slideUp('slow');}});});})(jQuery);(function($){var dokan_messages=DokanValidateMsg;dokan_messages.maxlength=$.validator.format(dokan_messages.maxlength_msg);dokan_messages.minlength=$.validator.format(dokan_messages.minlength_msg);dokan_messages.rangelength=$.validator.format(dokan_messages.rangelength_msg);dokan_messages.range=$.validator.format(dokan_messages.range_msg);dokan_messages.max=$.validator.format(dokan_messages.max_msg);dokan_messages.min=$.validator.format(dokan_messages.min_msg);$.validator.messages=dokan_messages;$(document).on('click','#dokan_store_tnc_enable',function(e){if($(this).is(':checked')){$('#dokan_tnc_text').show();}else{$('#dokan_tnc_text').hide();}}).ready(function(e){if($('#dokan_store_tnc_enable').is(':checked')){$('#dokan_tnc_text').show();}else{$('#dokan_tnc_text').hide();}});})(jQuery);;(function($){function resize_dummy_image(){var width=dokan.store_banner_dimension.width,height=(dokan.store_banner_dimension.height/dokan.store_banner_dimension.width)*$('#dokan-content').width();$('.profile-info-img.dummy-image').css({height:height});}
resize_dummy_image();$(window).on('resize',function(e){resize_dummy_image();});$(':input.dokan-product-search').filter(':not(.enhanced)').each(function(){var select2_args={allowClear:$(this).data('allow_clear')?true:false,placeholder:$(this).data('placeholder'),minimumInputLength:$(this).data('minimum_input_length')?$(this).data('minimum_input_length'):'3',escapeMarkup:function(m){return m;},ajax:{url:dokan.ajaxurl,dataType:'json',delay:250,data:function(params){return{term:params.term,action:$(this).data('action')||'dokan_json_search_products_and_variations',security:dokan.search_products_nonce,exclude:$(this).data('exclude'),user_ids:$(this).data('user_ids'),include:$(this).data('include'),limit:$(this).data('limit')};},processResults:function(data){var terms=[];if(data){$.each(data,function(id,text){terms.push({id:id,text:text});});}
return{results:terms};},cache:true}};$(this).select2(select2_args).addClass('enhanced');if($(this).data('sortable')){var $select=$(this);var $list=$(this).next('.select2-container').find('ul.select2-selection__rendered');$list.sortable({placeholder:'ui-state-highlight select2-selection__choice',forcePlaceholderSize:true,items:'li:not(.select2-search__field)',tolerance:'pointer',stop:function(){$($list.find('.select2-selection__choice').get().reverse()).each(function(){var id=$(this).data('data').id;var option=$select.find('option[value="'+id+'"]')[0];$select.prepend(option);});}});}});})(jQuery);